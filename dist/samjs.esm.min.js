/**
 * This is SamJs.js v0.3.1
 *
 * A Javascript port of "SAM Software Automatic Mouth".
 *
 * (c) 2017-2025 Christian Schiffler
 *
 * @link(https://github.com/discordier/sam)
 *
 * @author 2017 Christian Schiffler <c.schiffler@cyberspectrum.de>
 */
let O=(e,H)=>0!=(e&H),E=e=>{let r=new Uint8Array(e.length);return e.split("").forEach((e,H)=>{r[H]=e.charCodeAt(0)}),r},t=e=>{var H=new Uint8Array(4);return H[0]=e,H[1]=e>>8,H[2]=e>>16,H[3]=e>>24,H},n=e=>{var H=new Uint8Array(2);return H[0]=e,H[1]=e>>8,H},o=null,l=e=>{let H=new Uint8Array(44+e.length),r=0,A=e=>{H.set(e,r),r+=e.length};return A(E("RIFF")),A(t(e.length+12+16+8-8)),A(E("WAVE")),A(E("fmt ")),A(t(16)),A(n(1)),A(n(1)),A(t(22050)),A(t(22050)),A(n(1)),A(n(8)),A(E("data")),A(t(e.length)),A(e),H},R={" ":0,"!":2,'"':2,"#":2,$:2,"%":2,"&":2,"'":130,"(":0,")":0,"*":2,"+":2,",":2,"-":2,".":2,"/":2,0:3,1:3,2:3,3:3,4:3,5:3,6:3,7:3,8:3,9:3,":":2,";":2,"<":2,"=":2,">":2,"?":2,"@":2,A:192,B:168,C:176,D:172,E:192,F:160,G:184,H:160,I:192,J:188,K:160,L:172,M:168,N:172,O:192,P:160,Q:160,R:172,S:180,T:164,U:192,V:168,W:168,X:176,Y:192,Z:188,"[":0,"\\":0,"]":0,"^":2,_:0,"`":32},I=128,Y=(e,H)=>0!=(R[e]&H),U=(e,H,r)=>Y(e[H],r),W=(e,H)=>-1!==H.indexOf(e),r=e=>{let H=e.split("="),A=H.pop(),r=H.join("=").split("("),E=r.pop().split(")"),t=r[0],n=E[0],l=E[1],o=["T","C","S"],O=["E","I","Y"],R=(e,H,r)=>{if(e.startsWith(n,H)&&((H,r)=>{for(let e=t.length-1;-1<e;e--){var A=t[e];if(Y(A,I)){if(H[--r]!==A)return!1}else if(!{" ":()=>!U(H,--r,I),"#":()=>U(H,--r,64),".":()=>U(H,--r,8),"&":()=>U(H,--r,16)||W(H.substr(--r,2),["CH","SH"]),"@":()=>{var e;return!!U(H,--r,4)||"H"===(e=H[r])&&!!W(e,o)},"^":()=>U(H,--r,32),"+":()=>W(H[--r],O),":":()=>{for(;0<=r&&U(H,r-1,32);)r--;return!0}}[A]())return!1}return!0})(e,H)&&((H,r)=>{for(let e=0;e<l.length;e++){var A=l[e];if(Y(A,I)){if(H[++r]!==A)return!1}else if(!{" ":()=>!U(H,++r,I),"#":()=>U(H,++r,64),".":()=>U(H,++r,8),"&":()=>U(H,++r,16)||W(H.substr(++r-2,2),["HC","HS"]),"@":()=>{var e;return!!U(H,++r,4)||"H"===(e=H[r])&&!!W(e,o)},"^":()=>U(H,++r,32),"+":()=>W(H[++r],O),":":()=>{for(;U(H,r+1,32);)r++;return!0},"%":()=>{if("E"!==H[r+1])return"ING"===H.substr(r+1,3)&&(r+=3,!0);if(U(H,r+2,I)){if(!W(H[r+2],["R","S","D"]))return"L"!==H[r+2]?"FUL"===H.substr(r+2,3)&&(r+=4,!0):"Y"===H[r+3]&&(r+=3,!0);r+=2}else r++;return!0}}[A]())return!1}return!0})(e,H+(n.length-1)))return r(A,n.length),!0};return R.c=n[0],R},N={},Z=(" (A.)=EH4Y. |(A) =AH| (ARE) =AAR| (AR)O=AXR|(AR)#=EH4R| ^(AS)#=EY4S|(A)WA=AX|(AW)=AO5| :(ANY)=EH4NIY|(A)^+#=EY5|#:(ALLY)=ULIY| (AL)#=UL|(AGAIN)=AXGEH4N|#:(AG)E=IHJ|(A)^%=EY|(A)^+:#=AE| :(A)^+ =EY4| (ARR)=AXR|(ARR)=AE4R| ^(AR) =AA5R|(AR)=AA5R|(AIR)=EH4R|(AI)=EY4|(AY)=EY5|(AU)=AO4|#:(AL) =UL|#:(ALS) =ULZ|(ALK)=AO4K|(AL)^=AOL| :(ABLE)=EY4BUL|(ABLE)=AXBUL|(A)VO=EY4|(ANG)+=EY4NJ|(ATARI)=AHTAA4RIY|(A)TOM=AE|(A)TTI=AE| (AT) =AET| (A)T=AH|(A)=AE| (B) =BIY4| (BE)^#=BIH|(BEING)=BIY4IHNX| (BOTH) =BOW4TH| (BUS)#=BIH4Z|(BREAK)=BREY5K|(BUIL)=BIH4L|(B)=B| (C) =SIY4| (CH)^=K|^E(CH)=K|(CHA)R#=KEH5|(CH)=CH| S(CI)#=SAY4|(CI)A=SH|(CI)O=SH|(CI)EN=SH|(CITY)=SIHTIY|(C)+=S|(CK)=K|(COMMODORE)=KAA4MAHDOHR|(COM)=KAHM|(CUIT)=KIHT|(CREA)=KRIYEY|(C)=K| (D) =DIY4| (DR.) =DAA4KTER|#:(DED) =DIHD|.E(D) =D|#:^E(D) =T| (DE)^#=DIH| (DO) =DUW| (DOES)=DAHZ|(DONE) =DAH5N|(DOING)=DUW4IHNX| (DOW)=DAW|#(DU)A=JUW|#(DU)^#=JAX|(D)=D| (E) =IYIY4|#:(E) =|':^(E) =| :(E) =IY|#(ED) =D|#:(E)D =|(EV)ER=EH4V|(E)^%=IY4|(ERI)#=IY4RIY|(ERI)=EH4RIH|#:(ER)#=ER|(ERROR)=EH4ROHR|(ERASE)=IHREY5S|(ER)#=EHR|(ER)=ER| (EVEN)=IYVEHN|#:(E)W=|@(EW)=UW|(EW)=YUW|(E)O=IY|#:&(ES) =IHZ|#:(E)S =|#:(ELY) =LIY|#:(EMENT)=MEHNT|(EFUL)=FUHL|(EE)=IY4|(EARN)=ER5N| (EAR)^=ER5|(EAD)=EHD|#:(EA) =IYAX|(EA)SU=EH5|(EA)=IY5|(EIGH)=EY4|(EI)=IY4| (EYE)=AY4|(EY)=IY|(EU)=YUW5|(EQUAL)=IY4KWUL|(E)=EH| (F) =EH4F|(FUL)=FUHL|(FRIEND)=FREH5ND|(FATHER)=FAA4DHER|(F)F=|(F)=F| (G) =JIY4|(GIV)=GIH5V| (G)I^=G|(GE)T=GEH5|SU(GGES)=GJEH4S|(GG)=G| B#(G)=G|(G)+=J|(GREAT)=GREY4T|(GON)E=GAO5N|#(GH)=| (GN)=N|(G)=G| (H) =EY4CH| (HAV)=/HAE6V| (HERE)=/HIYR| (HOUR)=AW5ER|(HOW)=/HAW|(H)#=/H|(H)=| (IN)=IHN| (I) =AY4|(I) =AY|(IN)D=AY5N|SEM(I)=IY| ANT(I)=AY|(IER)=IYER|#:R(IED) =IYD|(IED) =AY5D|(IEN)=IYEHN|(IE)T=AY4EH|(I')=AY5| :(I)^%=AY5| :(IE) =AY4|(I)%=IY|(IE)=IY4| (IDEA)=AYDIY5AH|(I)^+:#=IH|(IR)#=AYR|(IZ)%=AYZ|(IS)%=AYZ|I^(I)^#=IH|+^(I)^+=AY|#:^(I)^+=IH|(I)^+=AY|(IR)=ER|(IGH)=AY4|(ILD)=AY5LD| (IGN)=IHGN|(IGN) =AY4N|(IGN)^=AY4N|(IGN)%=AY4N|(ICRO)=AY4KROH|(IQUE)=IY4K|(I)=IH| (J) =JEY4|(J)=J| (K) =KEY4| (K)N=|(K)=K| (L) =EH4L|(LO)C#=LOW|L(L)=|#:^(L)%=UL|(LEAD)=LIYD| (LAUGH)=LAE4F|(L)=L| (M) =EH4M| (MR.) =MIH4STER| (MS.)=MIH5Z| (MRS.) =MIH4SIXZ|(MOV)=MUW4V|(MACHIN)=MAHSHIY5N|M(M)=|(M)=M| (N) =EH4N|E(NG)+=NJ|(NG)R=NXG|(NG)#=NXG|(NGL)%=NXGUL|(NG)=NX|(NK)=NXK| (NOW) =NAW4|N(N)=|(NON)E=NAH4N|(N)=N| (O) =OH4W|(OF) =AHV| (OH) =OW5|(OROUGH)=ER4OW|#:(OR) =ER|#:(ORS) =ERZ|(OR)=AOR| (ONE)=WAHN|#(ONE) =WAHN|(OW)=OW| (OVER)=OW5VER|PR(O)V=UW4|(OV)=AH4V|(O)^%=OW5|(O)^EN=OW|(O)^I#=OW5|(OL)D=OW4L|(OUGHT)=AO5T|(OUGH)=AH5F| (OU)=AW|H(OU)S#=AW4|(OUS)=AXS|(OUR)=OHR|(OULD)=UH5D|(OU)^L=AH5|(OUP)=UW5P|(OU)=AW|(OY)=OY|(OING)=OW4IHNX|(OI)=OY5|(OOR)=OH5R|(OOK)=UH5K|F(OOD)=UW5D|L(OOD)=AH5D|M(OOD)=UW5D|(OOD)=UH5D|F(OOT)=UH5T|(OO)=UW5|(O')=OH|(O)E=OW|(O) =OW|(OA)=OW4| (ONLY)=OW4NLIY| (ONCE)=WAH4NS|(ON'T)=OW4NT|C(O)N=AA|(O)NG=AO| :^(O)N=AH|I(ON)=UN|#:(ON)=UN|#^(ON)=UN|(O)ST=OW|(OF)^=AO4F|(OTHER)=AH5DHER|R(O)B=RAA|^R(O):#=OW5|(OSS) =AO5S|#:^(OM)=AHM|(O)=AA| (P) =PIY4|(PH)=F|(PEOPL)=PIY5PUL|(POW)=PAW4|(PUT) =PUHT|(P)P=|(P)S=|(P)N=|(PROF.)=PROHFEH4SER|(P)=P| (Q) =KYUW4|(QUAR)=KWOH5R|(QU)=KW|(Q)=K| (R) =AA5R| (RE)^#=RIY|(R)R=|(R)=R| (S) =EH4S|(SH)=SH|#(SION)=ZHUN|(SOME)=SAHM|#(SUR)#=ZHER|(SUR)#=SHER|#(SU)#=ZHUW|#(SSU)#=SHUW|#(SED)=ZD|#(S)#=Z|(SAID)=SEHD|^(SION)=SHUN|(S)S=|.(S) =Z|#:.E(S) =Z|#:^#(S) =S|U(S) =S| :#(S) =Z|##(S) =Z| (SCH)=SK|(S)C+=|#(SM)=ZUM|#(SN)'=ZUM|(STLE)=SUL|(S)=S| (T) =TIY4| (THE) #=DHIY| (THE) =DHAX|(TO) =TUX| (THAT)=DHAET| (THIS) =DHIHS| (THEY)=DHEY| (THERE)=DHEHR|(THER)=DHER|(THEIR)=DHEHR| (THAN) =DHAEN| (THEM) =DHAEN|(THESE) =DHIYZ| (THEN)=DHEHN|(THROUGH)=THRUW4|(THOSE)=DHOHZ|(THOUGH) =DHOW|(TODAY)=TUXDEY|(TOMO)RROW=TUMAA5|(TO)TAL=TOW5| (THUS)=DHAH4S|(TH)=TH|#:(TED)=TIXD|S(TI)#N=CH|(TI)O=SH|(TI)A=SH|(TIEN)=SHUN|(TUR)#=CHER|(TU)A=CHUW| (TWO)=TUW|&(T)EN =|(T)=T| (U) =YUW4| (UN)I=YUWN| (UN)=AHN| (UPON)=AXPAON|@(UR)#=UH4R|(UR)#=YUH4R|(UR)=ER|(U)^ =AH|(U)^^=AH5|(UY)=AY5| G(U)#=|G(U)%=|G(U)#=W|#N(U)=YUW|@(U)=UW|(U)=YUW| (V) =VIY4|(VIEW)=VYUW5|(V)=V| (W) =DAH4BULYUW| (WERE)=WER|(WA)SH=WAA|(WA)ST=WEY|(WA)S=WAH|(WA)T=WAA|(WHERE)=WHEHR|(WHAT)=WHAHT|(WHOL)=/HOWL|(WHO)=/HUW|(WH)=WH|(WAR)#=WEHR|(WAR)=WAOR|(WOR)^=WER|(WR)=R|(WOM)A=WUHM|(WOM)E=WIHM|(WEA)R=WEH|(WANT)=WAA5NT|ANS(WER)=ER|(W)=W| (X) =EH4KR| (X)=Z|(X)=KS| (Y) =WAY4|(YOUNG)=YAHNX| (YOUR)=YOHR| (YOU)=YUW| (YES)=YEHS| (Y)=Y|F(Y)=AY|PS(YCH)=AYK|#:^(Y)=IY|#:^(Y)I=IY| :(Y) =AY| :(Y)#=AY| :(Y)^+:#=IH| :(Y)^#=AY|(Y)=IH| (Z) =ZIY4|(Z)=Z".split("|").map(e=>{var H=(e=r(e)).c;N[H]=N[H]||[],N[H].push(e)}),'(A)=|(!)=.|(") =-AH5NKWOWT-|(")=KWOW4T-|(#)= NAH4MBER|($)= DAA4LER|(%)= PERSEH4NT|(&)= AEND|(\')=|(*)= AE4STERIHSK|(+)= PLAH4S|(,)=,| (-) =-|(-)=|(.)= POYNT|(/)= SLAE4SH|(0)= ZIY4ROW| (1ST)=FER4ST| (10TH)=TEH4NTH|(1)= WAH4N| (2ND)=SEH4KUND|(2)= TUW4| (3RD)=THER4D|(3)= THRIY4|(4)= FOH4R| (5TH)=FIH4FTH|(5)= FAY4V| (64) =SIH4KSTIY FOHR|(6)= SIH4KS|(7)= SEH4VUN| (8TH)=EY4TH|(8)= EY4T|(9)= NAY4N|(:)=.|(;)=.|(<)= LEH4S DHAEN|(=)= IY4KWULZ|(>)= GREY4TER DHAEN|(?)=?|(@)= AE6T|(^)= KAE4RIXT'.split("|").map(r)),a="*12345678".split(""),A=" *.*?*,*-*IYIHEHAEAAAHAOUHAXIXERUXOHRXLXWXYXWHR*L*W*Y*M*N*NXDXQ*S*SHF*TH/H/XZ*ZHV*DHCH**J*******EYAYOYAWOWUWB*****D*****G*****GX****P*****T*****K*****KX****ULUMUN".match(/.{1,2}/g),S=[32768,49408,49408,49408,49408,164,164,164,164,164,164,132,132,164,164,132,132,132,132,132,132,132,68,4164,4164,4164,4164,2124,3148,2124,1096,16460,9280,8256,8256,9280,64,64,9284,8260,8260,9284,8264,8256,76,8260,0,0,180,180,180,148,148,148,78,78,78,1102,1102,1102,78,78,78,78,78,78,75,75,75,1099,1099,1099,75,75,75,75,75,75,128,193,193],i=[0,4626,4626,4626,2056,2824,2312,2824,3592,3851,2822,4108,3082,1541,1541,3595,3082,3594,3082,2825,2056,2055,2825,2567,2310,2056,2054,2055,2055,2055,770,1285,514,514,514,514,514,514,1542,1542,2055,1542,1542,514,2312,1027,513,286,3597,3852,3852,3852,3598,3593,2054,513,514,1797,513,257,1798,513,514,1798,513,514,2056,514,514,1540,514,514,1798,513,1028,1798,257,1028,1479,1535],P=(H,r)=>{var e=A.findIndex(e=>e===H+r&&"*"!==e[1]);return-1!==e&&e},m=H=>{var e=A.findIndex(e=>e===H+"*");return-1!==e&&e},w=(E,t,n)=>{for(let A=0;A<E.length;A++){let e=E[A],H=E[A+1]||"",r;if(!1!==(r=P(e,H)))A++,t(r);else if(!1!==(r=m(e)))t(r);else{for(r=a.length;e!==a[r]&&0<r;)--r;if(0===r)throw Error();n(r)}}},f=(e,H)=>O(S[e],H),B=23,V=57,b=69,y=1,J=2,k=8192,x=4096,$=2048,Q=1024,j=256,s=128,u=64,T=32,_=16,q=8,D=4,h=2,g=1,z=(r,A,E,t)=>{let e=(e,H)=>{switch(e){case 53:f(E(H-1),Q)&&A(H,16);break;case 42:r(H+1,43,t(H));break;case 44:r(H+1,45,t(H))}},H=(e,H)=>{A(e,13),r(e+1,H,t(e))},n=-1,l;for(;null!==(l=E(++n));)if(0!==l)if(f(l,_))r(n+1,f(l,T)?21:20,t(n)),e(l,n);else if(78===l)H(n,24);else if(79===l)H(n,27);else if(80===l)H(n,28);else if(f(l,s)&&t(n))0===E(n+1)&&null!==(l=E(n+2))&&f(l,s)&&t(n+2)&&r(n+2,31,0);else{var o,O=0===n?null:E(n-1);if(l===B)switch(O){case b:A(n-1,42);break;case V:A(n-1,44);break;default:f(O,s)&&A(n,18)}else 24===l&&f(O,s)?A(n,19):60===O&&32===l?A(n,38):60===l?(o=E(n+1),f(o,T)||null===o||A(n,63)):(72===l&&(o=E(n+1),f(o,T)&&null!==o||(A(n,75),l=75)),f(l,g)&&32===O?A(n,l-12):f(l,g)||e(l,n),69!==l&&57!==l||0<n&&f(E(n-1),s)&&(0===(l=E(n+1))&&(l=E(n+2)),f(l,s))&&!t(n+1)&&A(n,30))}},e1=(E,t,n)=>{for(let e=0;null!==E(e);e++)if(f(E(e),j)){for(var H,r=e;1<--e&&!f(E(e),s););if(0===e)break;for(;e<r;e++)f(E(e),k)&&!f(E(e),D)||(H=n(e),t(e,(H>>1)+H+1))}let l=-1,o;for(;null!==(o=E(++l));){let e=l,H,r,A;if(f(o,s))o=E(++e),f(o,u)?(H=null===o?u|g:S[o],O(H,D)?(A=n(l),t(l,(A>>2)+A+1)):O(H,g)&&(r=n(l),t(l,r-(r>>3)))):18!==o&&19!==o||!f(E(++e),u)||t(l,n(l)-1);else if(f(o,$))null!==(o=E(++e))&&f(o,h)&&(t(e,6),t(e-1,5));else if(f(o,h)){for(;0===(o=E(++e)););null!==o&&f(o,h)&&(t(e,1+(n(e)>>1)),t(l,1+(n(l)>>1)))}else 0<e&&f(o,x)&&f(E(e-1),h)&&t(e,n(e)-2)}},H1=(e,H,r)=>{let A=0;for(var E;null!==(E=e(A));)f(E,u)&&null!==(E=e(A+1))&&f(E,s)&&0!==(E=H(A+1))&&E<128&&r(A,E+1),++A},r1=(e,H,r)=>{let A=0;for(var E;null!==(E=e(A));){var t=H(A);r(A,0===t||127<t?255&i[E]:i[E]>>8),A++}},A1=(r,e,H)=>{let A=-1;for(var E;null!==(E=r(++A));)if(f(E,h)){if(f(E,g)){let e,H=A;for(;0===(e=r(++H)););if(null!==e&&(f(e,q)||36===e||37===e))continue}e(A+1,E+1,H(A),255&i[E+1]),e(A+2,E+2,H(A),255&i[E+2]),A+=2}},E1=[24,26,23,23,23],t1=[0,224,230,236,243,249,0,6,12,6],L=[0,31,31,31,31,2,2,2,2,2,2,2,2,2,5,5,2,10,2,8,5,5,11,10,9,8,8,160,8,8,23,31,18,18,18,18,30,30,20,20,20,20,23,23,26,26,29,29,2,2,2,2,2,2,26,29,27,26,29,27,26,29,27,26,29,27,23,29,23,23,29,23,23,29,23,23,29,23,23,23],c=[0,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,3,2,4,4,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,1,0,1,0,1,0,5,5,5,5,5,4,4,2,0,1,2,0,1,2,0,1,2,0,1,2,0,2,2,0,1,3,0,2,3,0,2,160,160],p=[0,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,4,4,3,3,3,3,3,1,2,3,2,1,3,3,3,3,1,1,3,3,3,2,2,3,2,3,0,0,5,5,5,5,4,4,2,0,2,2,0,3,2,0,4,2,0,3,2,0,2,2,0,2,3,0,3,3,0,3,176,160],n1=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,241,226,211,187,124,149,1,2,3,3,0,114,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,27,0,0,25,0,0,0,0,0,0,0,0,0],l1=[0,5980947,5980947,5980947,5980947,7230474,6113550,5980947,5783320,5842971,5712919,5775125,5383440,5844244,6113550,4075794,5383182,5774866,4076306,7218448,5250317,6112527,5904395,3944978,7216654,5904395,7230217,5320198,7943686,6641158,7943686,5980945,6506758,6967046,5315078,7946758,6113550,5383440,6107913,6767114,4990984,6106890,6639366,6639366,7946758,6639365,7958022,0,5916691,5777179,5775125,5778203,5774866,5382669,5315078,5315078,5315078,7946758,7946758,7946758,7368198,7237126,7237126,6181894,6181894,6181894,5315078,5315078,5315078,7946758,7946758,7946758,6647046,6641162,7367946,6181894,6181894,6181894,556844,98067],G=[0,0,0,0,0,526861,461581,527630,527887,68879,68623,3087,68367,2316,461581,330508,68623,3087,396301,67597,2061,461838,2061,330252,67597,2061,526861,780,2313,198153,0,0,0,0,0,0,0,0,779,66827,779,1035,0,0,1,66827,920064,66050,593422,68879,3087,68879,3087,2061,2,260,0,2,260,0,1,260,0,1,260,0,0,0,0,0,0,0,0,461324,0,0,330240,0,1245199,1048591],o1=[56,132,107,25,198,99,24,134,115,152,198,177,28,202,49,140,199,49,136,194,48,152,70,49,24,198,53,12,202,49,12,198,33,16,36,105,18,194,49,20,196,113,8,74,34,73,171,106,168,172,73,81,50,213,82,136,147,108,148,34,21,84,210,37,150,212,80,165,70,33,8,133,107,24,196,99,16,206,107,24,140,113,25,140,99,53,12,198,51,153,204,108,181,78,162,153,70,33,40,130,149,46,227,48,156,197,48,156,162,177,156,103,49,136,102,89,44,83,24,132,103,80,202,227,10,172,171,48,172,98,48,140,99,16,148,98,177,140,130,40,150,51,152,214,181,76,98,41,165,74,181,156,198,49,20,214,56,156,75,180,134,101,24,174,103,28,166,99,25,150,35,25,132,19,8,166,82,172,202,34,137,110,171,25,140,98,52,196,98,25,134,99,24,196,35,88,214,163,80,66,84,74,173,74,37,17,107,100,137,74,99,57,138,35,49,42,234,162,169,68,197,18,205,66,52,140,98,24,140,99,17,72,102,49,157,68,51,29,70,49,156,198,177,12,205,50,136,196,115,24,134,115,8,214,99,88,7,129,224,240,60,7,135,144,60,124,15,199,192,192,240,124,30,7,128,128,0,28,120,112,241,199,31,192,12,254,28,31,31,14,10,122,192,113,242,131,143,3,15,15,12,0,121,248,97,224,67,15,131,231,24,249,193,19,218,233,99,143,15,131,131,135,195,31,60,112,240,225,225,227,135,184,113,14,32,227,141,72,120,28,147,135,48,225,193,193,228,120,33,131,131,195,135,6,57,229,195,135,7,14,28,28,112,244,113,156,96,54,50,195,30,60,243,143,14,60,112,227,199,143,15,15,14,60,120,240,227,135,6,240,227,7,193,153,135,15,24,120,112,112,252,243,16,177,140,140,49,124,112,225,134,60,100,108,176,225,227,15,35,143,15,30,62,56,60,56,123,143,7,14,60,244,23,30,60,120,242,158,114,73,227,37,54,56,88,57,226,222,60,120,120,225,199,97,225,225,176,240,240,195,199,14,56,192,240,206,115,115,24,52,176,225,199,142,28,60,248,56,240,225,193,139,134,143,28,120,112,240,120,172,177,143,57,49,219,56,97,195,14,14,56,120,115,23,30,57,30,56,100,225,241,193,78,15,64,162,2,197,143,129,161,252,18,8,100,224,60,34,224,69,7,142,12,50,144,240,31,32,73,224,248,12,96,240,23,26,65,170,164,208,141,18,130,30,30,3,248,62,3,12,115,128,112,68,38,3,36,225,62,4,78,4,28,193,9,204,158,144,33,7,144,67,100,192,15,198,144,156,193,91,3,226,29,129,224,94,29,3,132,184,44,15,128,177,131,224,48,65,30,67,137,131,80,252,36,46,19,131,241,124,76,44,201,13,131,176,181,130,228,232,6,156,7,160,153,29,7,62,130,143,112,48,116,64,202,16,228,232,15,146,20,63,6,248,132,136,67,129,10,52,57,65,198,227,28,71,3,176,184,19,10,194,100,248,24,249,96,179,192,101,32,96,166,140,195,129,32,48,38,30,28,56,211,1,176,38,64,244,11,195,66,31,133,50,38,96,64,201,203,1,236,17,40,64,250,4,52,224,112,76,140,29,7,105,3,22,200,4,35,232,198,154,11,26,3,224,118,6,5,207,30,188,88,49,113,102,0,248,63,4,252,12,116,39,138,128,113,194,58,38,6,192,31,5,15,152,64,174,1,127,192,7,255,0,14,254,0,3,223,128,3,239,128,27,241,194,0,231,224,24,252,224,33,252,128,60,252,64,14,126,0,63,62,0,15,254,0,31,255,0,62,240,7,252,0,126,16,63,255,0,63,56,14,124,1,135,12,252,199,0,62,4,15,62,31,15,15,31,15,2,131,135,207,3,135,15,63,192,7,158,96,63,192,3,254,0,63,224,119,225,192,254,224,195,224,1,223,248,3,7,0,126,112,0,124,56,24,254,12,30,120,28,124,62,14,31,30,30,62,0,127,131,7,219,135,131,7,199,7,16,113,255,0,63,226,1,224,193,195,225,0,127,192,5,240,32,248,240,112,254,120,121,248,2,63,12,143,3,15,159,224,193,199,135,3,195,195,176,225,225,193,227,224,113,240,0,252,112,124,12,62,56,14,28,112,195,199,3,129,193,199,231,0,15,199,135,25,9,239,196,51,224,193,252,248,112,240,120,248,240,97,199,0,31,248,1,124,248,240,120,112,60,124,206,14,33,131,207,8,7,143,8,193,135,143,128,199,227,0,7,248,224,239,0,57,247,128,14,248,225,227,248,33,159,192,255,3,248,7,192,31,248,196,4,252,196,193,188,135,240,15,192,127,5,224,37,236,192,62,132,71,240,142,3,248,3,251,192,25,248,7,156,12,23,248,7,224,31,161,252,15,252,1,240,63,0,254,3,240,31,0,253,0,255,136,13,249,1,255,0,112,7,192,62,66,243,13,196,127,128,252,7,240,94,192,63,0,120,63,129,255,1,248,1,195,232,12,228,100,143,228,15,240,7,240,194,31,0,127,192,111,128,126,3,248,7,240,63,192,120,15,130,7,254,34,119,112,2,118,3,254,0,254,103,0,124,199,241,142,198,59,224,63,132,243,25,216,3,153,252,9,184,15,248,0,157,36,97,249,13,0,253,3,240,31,144,63,1,248,31,208,15,248,55,1,248,7,240,15,192,63,0,254,3,248,15,192,63,0,250,3,240,15,128,255,1,184,7,240,1,252,1,188,128,19,30,0,127,225,64,127,160,127,176,0,63,192,31,192,56,15,240,31,128,255,1,252,3,241,126,1,254,1,240,255,0,127,192,29,7,240,15,192,126,6,224,7,224,15,248,6,193,254,1,252,3,224,15,0,252],O1=(H,r)=>{let A=(e,H)=>(e*H>>8&255)<<1,E=[[],[],[]];l1.map((e,H)=>{E[0][H]=255&e,E[1][H]=e>>8&255,E[2][H]=e>>16&255});for(let e=5;e<30;e++)E[0][e]=A(H,E[0][e]),E[1][e]=A(r,E[1][e]);for(let e=48;e<54;e++)E[0][e]=A(H,E[0][e]),E[1][e]=A(r,E[1][e]);return E},R1=(H,e,r,A)=>{let O=[H,e[0],e[1],e[2],r[0],r[1],r[2]],R=(e,H)=>O[e][H],E=(H,r,A,e)=>{let E=e<0,t=Math.abs(e)%H,n=e/H|0,l=0,o=H;for(;0<--o;){let e=R(r,A)+n;(l+=t)>=H&&(l-=H,E?e--:e&&e++),O[r][++A]=e,e+=n}},t,n,l=0;for(let e=0;e<A.length-1;e++){var o=A[e][0],I=A[e+1][0],Y=L[I],U=L[o],W=(n=U===Y?(t=c[o],c[I]):U<Y?(t=p[I],c[I]):(t=c[o],p[o]),(l+=A[e][1])+n),N=l-t,a=t+n;if(0==(a-2&128)){E((U=A[e][1]>>1)+(Y=A[e+1][1]>>1),0,N,H[l+Y]-H[l-U]);for(let e=1;e<7;e++){var S=R(e,W)-R(e,N);E(a,e,N,S)}}}return l+A[A.length-1][1]},I1=255,Y1=1,U1=(r,A,E)=>{let e=(e,H,r)=>{var A=H;H<30?H=0:H-=30;let E;for(;127===(E=r[H]);)++H;for(;H!==A;)for(E+=e,r[H]=255&E;++H!==A&&255===r[H];);},t=[],n=[[],[],[]],l=[[],[],[]],o=[],O=0;for(let H=0;H<A.length;H++){var R=A[H][0],I=(R===y?e(Y1,O,t):R===J&&e(I1,O,t),t1[A[H][2]]);for(let e=A[H][1];0<e;e--)n[0][O]=E[0][R],n[1][O]=E[1][R],n[2][O]=E[2][R],l[0][O]=255&G[R],l[1][O]=G[R]>>8&255,l[2][O]=G[R]>>16&255,o[O]=n1[R],t[O]=r+I&255,O++}return[t,n,l,o]},W1=(e,H,r,A,E)=>{var r=O1(r,A),[t,n,l,A]=U1(H,e,r),H=R1(t,n,l,e);if(!E)for(let e=0;e<t.length;e++)t[e]-=n[0][e]>>1;var o=[0,1,2,2,2,3,3,4,4,5,6,8,9,11,13,15];for(let e=l[0].length-1;0<=e;e--)l[0][e]=o[l[0][e]],l[1][e]=o[l[1][e]],l[2][e]=o[l[2][e]];return[H,n,t,l,A]},N1=e=>{let r=new Uint8Array(e),A=0,E=0,t=(e,H)=>{H=16*(15&H),t.ary(e,[H,H,H,H,H])};return t.ary=(e,H)=>{if(((A+=[[162,167,167,127,128],[226,60,60,0,0],[225,60,59,0,0],[200,0,0,54,55],[199,0,0,54,54]][E][e])/50|0)>r.length)throw new Error;E=e;for(let e=0;e<5;e++)r[(A/50|0)+e]=H[e]},t.get=()=>r.slice(0,A/50|0),t},v=(n,H,e,r)=>{let A=(7&e)-1,l=256*A&65535,o=248&e,E=(e,H,r,A)=>{let E=8,t=o1[l+o];for(;0!=(128&t)?n(e,H):n(r,A),t<<=1,--E;);};if(0===o){let e=r>>4^255;for(o=255&H;E(3,26,4,6),o++,o&=255,255&++e;);return o}o^=255;for(var t=255&E1[A];E(2,5,1,t),255&++o;);return H},M=e=>127*Math.sin(2*Math.PI*(e/256))|0,a1=(e,H,r,t,A,n,E)=>{let l=r,o=0,O=0,R=0,I=0,Y=0,U=A[0],W=.75*U|0;for(;H;){var N=E[Y];if(0!=(248&N))I=v(e,I,N,A[255&Y]),Y+=2,H-=2,l=r;else{{let H=[],r=256*o,A=256*O,E=256*R;for(let e=0;e<5;e++){var a=M(255&r>>8),S=M(255&A>>8),i=(255&E>>8)<129?-112:112,a=(a*(15&n[0][Y])+S*(15&n[1][Y])+i*(15&n[2][Y]))/32+128;H[e]=0|a,r+=256*t[0][Y]/4,A+=256*t[1][Y]/4,E+=256*t[2][Y]/4}e.ary(0,H)}if(0==--l){if(Y++,0==--H)return;l=r}if(0!=--U){if(0!=--W||0===N){o+=t[0][Y],O+=t[1][Y],R+=t[2][Y];continue}I=v(e,I,N,A[255&Y])}}U=A[Y],W=.75*U|0,o=0,O=0,R=0}};function d(e){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=(e=>{if(!e)return!1;let H=e=>e===o.length?null:o[e],r=(H,e,r,A)=>{for(let e=o.length-1;e>=H;e--)o[e+1]=o[e],l[e+1]=t(e),n[e+1]=E(e);o[H]=e,l[H]=0|A,n[H]=r},E=e=>0|n[e],t=e=>0|l[e],A=(e,H)=>{l[e]=H},n=[],l=[],o=[],O=0;return w(e,e=>{n[O]=0,l[O]=0,o[O++]=e},e=>{n[O-1]=e}),z(r,(e,H)=>{o[e]=H},H,E),H1(H,E,(e,H)=>{n[e]=H}),r1(H,E,A),e1(H,A,t),A1(H,r,E),o.map((e,H)=>e?[e,0|l[H],0|n[H]]:null).filter(e=>e)})(e);return!1!==e&&((e,H,r,A,E,t)=>{H=void 0===H?64:255&H,r=void 0===r?128:255&r,A=void 0===A?128:255&A,E=255&(l.speed||72),t=l.singmode||!1;var H=W1(e,H,r,A,t),r=N1(176.4*e.reduce((e,H)=>e+H[1],0)*E|0),[A,t,e,H,n]=H;return a1(r,A,E,t,e,H,n),r.get()})(e,l.pitch,l.mouth,l.throat)}let K={en:{name:"English",phonemes:{},rules:[],settings:{pitch:64,speed:72,mouth:128,throat:128}},ru:{name:"Russian",phonemes:{"\u0430":"AA","\u0410":"AA","\u044f":"Y*AA","\u042f":"Y*AA","\u043e":"OW","\u041e":"OW","\u0451":"Y*OW","\u0401":"Y*OW","\u0443":"UW","\u0423":"UW","\u044e":"Y*UW","\u042e":"Y*UW","\u044d":"EH","\u042d":"EH","\u0435":"Y*EH","\u0415":"Y*EH","\u0438":"IY","\u0418":"IY","\u044b":"IH","\u042b":"IH","\u0431":"B*","\u0411":"B*","\u0432":"V*","\u0412":"V*","\u0433":"G*","\u0413":"G*","\u0434":"D*","\u0414":"D*","\u0436":"ZH","\u0416":"ZH","\u0437":"Z*","\u0417":"Z*","\u0439":"Y*","\u0419":"Y*","\u043a":"K*","\u041a":"K*","\u043b":"L*","\u041b":"L*","\u043c":"M*","\u041c":"M*","\u043d":"N*","\u041d":"N*","\u043f":"P*","\u041f":"P*","\u0440":"R*","\u0420":"R*","\u0441":"S*","\u0421":"S*","\u0442":"T*","\u0422":"T*","\u0444":"F*","\u0424":"F*","\u0445":"HH","\u0425":"HH","\u0446":"T*S*","\u0426":"T*S*","\u0447":"CH","\u0427":"CH","\u0448":"SH","\u0428":"SH","\u0449":"SH","\u0429":"SH","\u044c":"","\u042c":"","\u044a":"","\u042a":""},rules:[" (\u0410)=AA4"," (\u042f)=Y*AA4"," (\u041e)=OW4"," (\u0401)=Y*OW4"," (\u0423)=UW4"," (\u042e)=Y*UW4"," (\u042d)=EH4"," (\u0415)=Y*EH4"," (\u0418)=IY4"," (\u042b)=IH4"," (\u0416\u0427)=SH"," (\u0429)=SH"," (\u042c)="," (\u042a)="],settings:{pitch:64,speed:72,mouth:128,throat:128}}},C=e=>{let H=" "+e.toUpperCase(),r=0,A="",E=(e,H)=>{r+=H,A+=e},t=0;for(;r<H.length&&t++<1e4;){var n=H[r];if("."!==n||U(H,r+1,1))if(Y(n,2))Z.some(e=>e(H,r,E));else if(0!==R[n]){if(!Y(n,I))return!1;N[n].some(e=>e(H,r,E))}else A+=" ",r++;else A+=".",r++}return A},F=d,X=(e,H)=>!1!==(e=d(e,H))&&(H=>{var r=new Float32Array(H.length);for(let e=0;e<H.length;e++)r[e]=(H[e]-128)/256;return r})(e);function e(e){let A=e||{},E=A.language||"en",r={...function(e){var e=0<arguments.length&&void 0!==e?e:"en",H=K[e];if(H)return H.settings;throw new Error(`Language ${e} not supported`)}(E),...A},t=(e,H)=>{if(console.log("Input text:",e),console.log("Language:",E),console.log("Phonetic flag:",H||A.phonetic),H||A.phonetic)return e.toUpperCase();if("en"!==E)try{var r=function(e,H){var r,A,H=1<arguments.length&&void 0!==H?H:"en",E=(console.log("Starting phoneme conversion for language:",H),console.log("Input text:",e),K[H]);if(!E)throw console.error("Language not found:",H),new Error(`Language ${H} not supported`);let t=e;if(E.phonemes){console.log("Applying phoneme mapping:",E.phonemes);for([r,A]of Object.entries(E.phonemes).sort((e,H)=>H[0].length-e[0].length)){var n=t,l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");n!==(t=t.replace(new RegExp(l,"g"),A))&&(console.log(`Mapped ${r} to `+A),console.log("Result after mapping:",t))}}if(E.rules&&0<E.rules.length){console.log("Applying stress rules:",E.rules);for(var o of E.rules){var[o,O]=o.split("="),R=t,I=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");R!==(t=t.replace(new RegExp(I,"g"),O))&&(console.log(`Rule applied: ${o}=`+O),console.log("Result after rule:",t))}}return t!==(t=t.replace(/[^A-Z0-9*]/g,""))&&(console.log("Cleaned non-phoneme characters"),console.log("Final result:",t)),t}(e,E);return console.log("Converted phonemes:",r),r}catch(e){console.error("Error converting text to phonemes:",e)}return C(e)};this.buf8=(e,H)=>(e=t(e,H),console.log("Final phonemes for buf8:",e),F(e,r)),this.buf32=(e,H)=>X(t(e,H),r),this.speak=(H,e)=>{if(H=this.buf32(H,e),o=null===o?new AudioContext:o){var n=o,l=H;let t,e=new Promise((e,H)=>{let r=n.createBufferSource(),A=n.createBuffer(1,l.length,22050),E=A.getChannelData(0);for(let e=0;e<l.length;e++)E[e]=l[e];r.buffer=A,r.connect(n.destination),r.onended=()=>{e(!0)},t=e=>{r.disconnect(),H(e)},r.start(0)});return e.abort=t,e}throw new Error},this.download=(e,H)=>{var r,e=this.buf8(e,H),H=new Blob([l(e)],{type:"audio/vnd.wave"}),H=(e=window.URL||window.webkitURL).createObjectURL(H);(r=document.createElement("a")).href=H,r.target="_blank",r.download="sam.wav",document.body.appendChild(r),r.click(),document.body.removeChild(r),e.revokeObjectURL(H)},this.wav=(e,H)=>l(this.buf8(e,H))}e.buf8=F,e.buf32=X,e.convert=C;export{e as default};
//# sourceMappingURL=samjs.esm.min.js.map